/**
 * Aircraft category classification and SVG icon mapping.
 * Maps ICAO type codes to visual categories, each with a distinct
 * top-down silhouette icon large enough for instant recognition.
 *
 * Icons by ADS-B Radar for macOS — https://adsb-radar.com
 * https://apps.apple.com/app/id1538149835
 */

export type AircraftCategory =
  | "fighter"
  | "tanker-transport"
  | "helicopter"
  | "surveillance"
  | "trainer"
  | "bomber"
  | "uav"
  | "unknown";

/** Maps known ICAO type codes (uppercase) to aircraft categories. */
export const AIRCRAFT_TYPE_MAP: Record<string, AircraftCategory> = {
  // ── Fighter ──────────────────────────────────────────────────
  F16: "fighter",
  F15: "fighter",
  F15C: "fighter",
  F15E: "fighter",
  FA18: "fighter",
  F18: "fighter",
  F22: "fighter",
  F35: "fighter",
  A10: "fighter",
  F117: "fighter",
  EF2K: "fighter",
  TORN: "fighter",
  SU27: "fighter",
  SU30: "fighter",
  MIG29: "fighter",
  JF17: "fighter",
  J10: "fighter",
  R1: "fighter",
  F14: "fighter",
  MIR2: "fighter",
  RFAL: "fighter",

  // ── Tanker / Transport ──────────────────────────────────────
  KC135: "tanker-transport",
  K35A: "tanker-transport",
  K35R: "tanker-transport",
  KC46: "tanker-transport",
  KC10: "tanker-transport",
  KC30: "tanker-transport",
  C17: "tanker-transport",
  C5: "tanker-transport",
  C5M: "tanker-transport",
  C130: "tanker-transport",
  C130J: "tanker-transport",
  C30J: "tanker-transport",
  C12: "tanker-transport",
  C37: "tanker-transport",
  C40: "tanker-transport",
  C2: "tanker-transport",
  A400: "tanker-transport",
  AN124: "tanker-transport",
  IL76: "tanker-transport",
  L100: "tanker-transport",
  E11: "tanker-transport",
  C26: "tanker-transport",
  C145: "tanker-transport",
  C146: "tanker-transport",
  C21: "tanker-transport",
  C32: "tanker-transport",
  C35: "tanker-transport",
  C38: "tanker-transport",
  DC10: "tanker-transport",

  // ── Helicopter ──────────────────────────────────────────────
  UH60: "helicopter",
  AH64: "helicopter",
  CH47: "helicopter",
  CH53: "helicopter",
  V22: "helicopter",
  HH60: "helicopter",
  MH60: "helicopter",
  OH58: "helicopter",
  AH1: "helicopter",
  SH60: "helicopter",
  NH90: "helicopter",
  H60: "helicopter",
  S70: "helicopter",
  EC45: "helicopter",
  S92: "helicopter",
  B06: "helicopter",
  B212: "helicopter",
  B412: "helicopter",
  H1: "helicopter",
  H47: "helicopter",
  H53: "helicopter",
  H64: "helicopter",
  EC35: "helicopter",
  EC55: "helicopter",
  EC25: "helicopter",
  AS32: "helicopter",
  S61: "helicopter",
  S65: "helicopter",
  S80: "helicopter",
  BK17: "helicopter",
  A109: "helicopter",
  A139: "helicopter",
  A149: "helicopter",
  A189: "helicopter",
  W3: "helicopter",

  // ── Surveillance ────────────────────────────────────────────
  E3: "surveillance",
  E8: "surveillance",
  E6: "surveillance",
  RC135: "surveillance",
  EP3: "surveillance",
  P8: "surveillance",
  P3: "surveillance",
  U2: "surveillance",
  E2: "surveillance",
  EA18G: "surveillance",
  E4: "surveillance",
  JSTAR: "surveillance",
  MC12: "surveillance",
  RC12: "surveillance",
  RC26: "surveillance",
  DHC8: "surveillance",
  RC7: "surveillance",
  EC37: "surveillance",
  E11A: "surveillance",
  E6B: "surveillance",
  MC55: "surveillance",

  // ── Trainer ─────────────────────────────────────────────────
  T38: "trainer",
  T6: "trainer",
  T45: "trainer",
  T1: "trainer",
  PC12: "trainer",
  T7: "trainer",
  PC21: "trainer",
  T44: "trainer",
  T34: "trainer",
  T53: "trainer",
  PC7: "trainer",
  PC9: "trainer",

  // ── Bomber ──────────────────────────────────────────────────
  B52: "bomber",
  B1: "bomber",
  B2: "bomber",
  B21: "bomber",

  // ── UAV ─────────────────────────────────────────────────────
  RQ4: "uav",
  MQ9: "uav",
  MQ1: "uav",
  RQ7: "uav",
  MQ4: "uav",
  HRON: "uav",
  MQ25: "uav",
  XQ58: "uav",
  MQ1C: "uav",
};

interface IconDimensions {
  size: [number, number];
  anchor: [number, number];
}

/** Icon size and anchor — intentionally large for instant recognition. */
export const ICON_SIZES: Record<AircraftCategory, IconDimensions> = {
  fighter: { size: [36, 36], anchor: [18, 18] },
  "tanker-transport": { size: [42, 42], anchor: [21, 21] },
  helicopter: { size: [38, 38], anchor: [19, 19] },
  surveillance: { size: [42, 42], anchor: [21, 21] },
  trainer: { size: [30, 30], anchor: [15, 15] },
  bomber: { size: [44, 44], anchor: [22, 22] },
  uav: { size: [32, 32], anchor: [16, 16] },
  unknown: { size: [34, 34], anchor: [17, 17] },
};

/**
 * Determines the aircraft category from its ICAO type code.
 * Exact match first, then prefix match from longest down to 2 chars.
 */
export const getAircraftCategory = (
  typeCode: string | undefined
): AircraftCategory => {
  if (!typeCode || typeCode.trim() === "") return "unknown";

  const normalized = typeCode.trim().toUpperCase();

  // Exact match
  if (normalized in AIRCRAFT_TYPE_MAP) {
    return AIRCRAFT_TYPE_MAP[normalized];
  }

  // Prefix match — longest prefix first, minimum 2 characters
  for (let len = normalized.length - 1; len >= 2; len--) {
    const prefix = normalized.substring(0, len);
    if (prefix in AIRCRAFT_TYPE_MAP) {
      return AIRCRAFT_TYPE_MAP[prefix];
    }
  }

  return "unknown";
};

/** Returns a human-readable label for the aircraft category. */
export const getCategoryLabel = (category: AircraftCategory): string => {
  const labels: Record<AircraftCategory, string> = {
    fighter: "Fighter",
    "tanker-transport": "Tanker/Transport",
    helicopter: "Helicopter",
    surveillance: "Surveillance",
    trainer: "Trainer",
    bomber: "Bomber",
    uav: "UAV",
    unknown: "Unknown",
  };
  return labels[category];
};

const STROKE = 'stroke="#000" stroke-opacity="0.3" stroke-width="0.5"';

/* ------------------------------------------------------------------ */
/*  SVG icon data sourced from ADS-B Radar (https://adsb-radar.com)   */
/*  Icons by ADS-B Radar for macOS — used with attribution.           */
/* ------------------------------------------------------------------ */

/**
 * Returns inline SVG markup for the given aircraft category.
 * Each SVG is a top-down silhouette pointing north (up) with a thin
 * semi-transparent black outline for visibility on any map background.
 */
export const getAircraftIconSvg = (
  category: AircraftCategory,
  color: string
): string => {
  switch (category) {
    // ── Fighter (ADS-B Radar: a6 — high-performance delta-wing jet) ──
    case "fighter":
      return `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" width="100%" height="100%"><g transform="matrix(0,-1.526083,1.526083,0,154.192352,224.515808)"><path fill="${color}" ${STROKE} d="M 17.718 -10.644 L 24.384 -34.95 L 17.718 -59.193 L 22.376 -63.188 L 42.042 -45.053 L 46.445 -45.053 L 42.042 -78.667 L 53.954 -79.462 L 99.913 -44.391 C 99.913 -44.391 119.05 -46.566 128.237 -44.391 C 135.089 -42.769 147.119 -34.918 147.119 -34.918 C 147.119 -34.918 135.081 -27.123 128.237 -25.509 C 119.056 -23.344 99.939 -25.485 99.939 -25.485 L 53.954 9.636 L 42.042 8.831 L 46.445 -24.784 L 42.042 -24.784 L 22.376 -6.638 L 17.718 -10.644 Z"/></g></svg>`;

    // ── Tanker / Transport (ADS-B Radar: c130 — 4-engine military transport) ──
    case "tanker-transport":
      return `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="100%" height="100%"><path fill="${color}" ${STROKE} d="M 250.857 65.688 C 249.764 66.371 247.17 68.555 245.122 70.558 C 241.618 73.971 241.163 74.608 237.886 81.253 C 231.879 93.495 226.599 110.425 224.369 124.488 C 221.593 142.465 221.593 142.42 221.684 163.628 C 221.821 189.387 221.457 196.532 219.864 200.446 C 218.726 203.313 217.452 204.679 215.404 205.27 C 214.675 205.452 214.038 205.179 213.037 204.178 C 211.626 202.813 211.581 202.585 210.761 195.713 C 210.488 193.437 210.079 190.206 209.806 188.477 C 209.26 184.426 209.533 181.514 210.716 179.921 L 211.626 178.646 L 208.804 177.873 C 206.756 177.281 205.846 176.735 205.346 175.87 C 204.526 174.505 198.701 170.454 197.518 170.454 C 196.334 170.454 190.509 174.505 189.69 175.87 C 189.189 176.735 188.279 177.281 186.186 177.873 C 183.455 178.646 183.364 178.737 184.046 179.511 C 184.957 180.512 184.957 180.922 184.092 180.922 C 183.682 180.922 183.546 181.195 183.682 181.605 C 183.864 181.969 184.32 182.287 184.82 182.287 C 185.548 182.287 185.639 182.651 185.412 186.383 C 185.321 188.613 185.002 190.98 184.775 191.572 C 184.547 192.163 184.229 194.484 184.092 196.714 C 183.728 201.629 183.182 203.541 181.907 204.224 C 181.179 204.633 176.674 204.861 166.434 204.952 L 152.007 205.134 L 151.37 203.632 C 151.051 202.767 150.641 200.173 150.459 197.852 C 150.277 195.531 149.959 193.073 149.686 192.391 C 149.413 191.708 149.185 189.205 149.14 186.747 C 149.049 182.833 149.14 182.196 150.095 180.967 L 151.097 179.557 L 148.275 178.783 C 146.227 178.191 145.317 177.645 144.77 176.78 C 144.406 176.098 142.586 174.596 140.766 173.367 C 138.945 172.138 137.443 171.001 137.443 170.819 C 137.443 169.226 129.206 173.959 127.84 176.325 C 127.294 177.19 126.384 177.736 124.291 178.328 C 121.651 179.056 121.469 179.193 122.061 179.921 C 123.38 181.514 123.699 183.106 123.517 186.975 C 123.426 189.159 123.107 191.435 122.88 192.027 C 122.652 192.664 122.334 195.076 122.152 197.397 C 121.969 199.718 121.605 202.267 121.287 203.086 C 120.604 204.724 120.604 204.724 107.497 205.498 C 103.401 205.725 99.897 206.044 99.669 206.181 C 99.442 206.317 89.384 206.636 77.278 206.863 C 65.172 207.091 52.52 207.5 49.152 207.773 C 45.784 208.047 37.046 208.456 29.764 208.684 C 15.61 209.139 12.607 209.548 8.875 211.551 C 8.374 211.824 7.327 212.37 6.554 212.734 C 4.961 213.553 2.731 215.965 1.684 218.059 C 0.546 220.289 0 224.749 0 232.122 C 0.046 239.677 0.774 244.501 2.139 246.367 C 2.64 247.049 3.504 248.415 4.005 249.416 C 4.915 251.191 6.781 252.966 9.102 254.195 C 10.604 255.014 13.062 255.378 27.762 256.88 C 30.128 257.153 33.724 257.562 35.726 257.79 C 37.729 258.063 41.415 258.473 43.918 258.746 C 56.479 260.111 59.665 260.521 60.393 260.748 C 62.168 261.34 76.868 263.297 81.419 263.57 C 84.059 263.752 87.063 264.162 88.018 264.526 C 89.793 265.117 96.119 265.982 107.725 267.165 C 111.047 267.484 113.914 267.848 114.096 267.984 C 114.551 268.303 129.524 270.306 140.174 271.489 C 144.816 271.989 150.459 272.718 152.735 273.082 C 155.01 273.446 164.204 274.447 173.215 275.357 C 182.181 276.267 190.281 277.178 191.146 277.405 C 192.011 277.678 197.063 277.86 202.296 277.906 C 207.576 277.906 213.629 278.088 215.813 278.27 C 223.277 278.907 223.049 277.997 223.505 309.946 C 223.732 327.968 224.051 336.615 224.551 340.893 C 224.961 344.124 225.279 348.22 225.279 349.995 C 225.279 351.907 225.553 353.682 225.962 354.501 C 226.736 355.957 226.872 357.186 226.144 356.139 C 225.78 355.639 225.78 356.503 226.008 359.098 C 226.645 365.469 226.554 366.834 225.279 368.2 C 223.823 369.747 220.819 371.294 217.315 372.25 C 213.31 373.342 208.577 374.753 205.482 375.755 C 203.98 376.21 200.612 377.12 197.973 377.712 C 195.333 378.349 192.375 379.122 191.374 379.486 C 190.373 379.851 188.552 380.26 187.278 380.488 C 186.049 380.67 184.456 381.079 183.773 381.443 C 183.091 381.807 181.998 382.081 181.361 382.081 C 180.724 382.081 179.45 382.399 178.494 382.809 C 176.537 383.628 171.303 385.175 165.432 386.632 C 157.923 388.498 152.598 392.457 151.643 396.917 C 150.641 401.605 150.505 405.519 151.233 408.067 C 152.28 411.617 154.601 415.668 156.012 416.396 C 156.694 416.76 157.65 417.443 158.105 417.989 C 158.606 418.535 159.197 418.944 159.425 418.944 C 159.698 418.944 160.244 419.218 160.608 419.582 C 161.61 420.492 166.343 422.13 169.301 422.585 C 170.666 422.813 175.172 423.405 179.313 423.951 C 183.455 424.451 188.37 425.088 190.236 425.316 C 192.102 425.589 196.926 425.953 200.931 426.226 C 219.09 427.318 232.379 428.729 235.519 429.913 C 238.068 430.868 240.708 433.326 242.938 436.921 C 243.711 438.196 245.077 439.88 245.987 440.653 C 246.852 441.427 247.58 442.474 247.58 442.929 C 247.625 443.93 254.498 448.527 255.999 448.527 C 257.501 448.527 264.373 443.93 264.419 442.929 C 264.419 442.474 265.147 441.427 266.012 440.653 C 266.922 439.88 268.287 438.196 269.061 436.921 C 271.291 433.326 273.931 430.868 276.479 429.913 C 279.62 428.729 292.909 427.318 311.068 426.226 C 315.073 425.953 319.897 425.589 321.763 425.316 C 323.629 425.088 328.544 424.451 332.685 423.951 C 336.827 423.405 341.332 422.813 342.698 422.585 C 345.656 422.13 350.389 420.492 351.39 419.582 C 351.755 419.218 352.301 418.944 352.574 418.944 C 352.801 418.944 353.393 418.535 353.894 417.989 C 354.349 417.443 355.304 416.76 355.987 416.396 C 357.398 415.668 359.719 411.617 360.766 408.067 C 361.494 405.519 361.357 401.605 360.356 396.917 C 359.4 392.457 354.076 388.498 346.566 386.632 C 340.695 385.175 335.462 383.628 333.505 382.809 C 332.549 382.399 331.275 382.081 330.637 382.081 C 330 382.081 328.908 381.807 328.225 381.443 C 327.543 381.079 325.95 380.67 324.721 380.488 C 323.447 380.26 321.626 379.851 320.625 379.486 C 319.624 379.122 316.666 378.349 314.026 377.712 C 311.386 377.12 308.018 376.21 306.517 375.755 C 303.422 374.753 298.689 373.342 294.684 372.25 C 291.179 371.294 288.176 369.747 286.719 368.2 C 285.445 366.834 285.354 365.469 285.991 359.098 C 286.219 356.503 286.219 355.639 285.855 356.139 C 285.126 357.186 285.263 355.957 286.037 354.501 C 286.446 353.682 286.719 351.907 286.719 349.995 C 286.719 348.22 287.038 344.124 287.447 340.893 C 287.948 336.615 288.267 327.968 288.494 309.946 C 288.949 277.997 288.722 278.907 296.186 278.27 C 298.37 278.088 304.469 277.906 309.702 277.906 C 314.982 277.86 319.988 277.678 320.853 277.405 C 321.717 277.178 329.818 276.267 338.784 275.357 C 347.795 274.447 356.988 273.446 359.264 273.082 C 361.539 272.718 367.183 271.989 371.825 271.489 C 382.474 270.306 397.448 268.303 397.903 267.984 C 398.085 267.848 400.952 267.484 404.274 267.165 C 415.88 265.982 422.206 265.117 423.98 264.526 C 424.936 264.162 427.94 263.752 430.58 263.57 C 435.131 263.297 449.831 261.34 451.606 260.748 C 452.334 260.521 455.52 260.111 468.081 258.746 C 470.584 258.473 474.27 258.063 476.273 257.79 C 478.275 257.562 481.825 257.153 484.146 256.925 C 498.892 255.378 501.395 255.014 502.897 254.195 C 505.218 252.966 507.084 251.191 507.994 249.416 C 508.494 248.415 509.359 247.049 509.86 246.367 C 511.225 244.501 511.953 239.677 511.999 232.122 C 511.999 224.749 511.453 220.289 510.315 218.059 C 509.268 215.965 507.038 213.553 505.445 212.734 C 504.671 212.37 503.625 211.824 503.124 211.551 C 499.392 209.548 496.388 209.139 482.235 208.684 C 474.953 208.456 466.215 208.047 462.847 207.773 C 459.479 207.5 446.827 207.091 434.721 206.863 C 422.615 206.636 412.557 206.317 412.33 206.181 C 412.102 206.044 408.598 205.725 404.502 205.498 C 391.395 204.724 391.395 204.724 390.712 203.086 C 390.393 202.267 390.029 199.718 389.847 197.397 C 389.665 195.076 389.347 192.664 389.119 192.027 C 388.891 191.435 388.573 189.159 388.482 186.975 C 388.3 183.106 388.618 181.514 389.938 179.921 C 390.53 179.193 390.348 179.056 387.708 178.328 C 385.615 177.736 384.704 177.19 384.158 176.325 C 382.793 173.959 374.556 169.226 374.556 170.819 C 374.556 171.001 373.054 172.138 371.233 173.367 C 369.413 174.596 367.592 176.098 367.228 176.78 C 366.682 177.645 365.772 178.191 363.724 178.783 L 360.902 179.557 L 361.903 180.967 C 362.859 182.196 362.95 182.833 362.859 186.747 C 362.814 189.205 362.586 191.708 362.313 192.391 C 362.04 193.073 361.721 195.531 361.539 197.852 C 361.357 200.173 360.948 202.767 360.629 203.632 L 359.992 205.134 L 345.565 204.952 C 335.189 204.861 330.819 204.633 330.091 204.224 C 328.862 203.541 328.362 201.766 327.725 195.941 C 327.452 193.574 327.042 190.206 326.769 188.477 C 326.223 184.426 326.496 181.514 327.679 179.921 L 328.589 178.646 L 325.768 177.873 C 323.72 177.281 322.81 176.735 322.309 175.87 C 321.49 174.505 315.664 170.454 314.481 170.454 C 313.298 170.454 307.472 174.505 306.653 175.87 C 306.152 176.735 305.242 177.281 303.194 177.873 L 300.373 178.646 L 301.283 179.921 C 302.466 181.514 302.739 184.426 302.193 188.477 C 301.92 190.206 301.51 193.437 301.237 195.713 C 300.418 202.585 300.373 202.813 298.962 204.178 C 297.961 205.179 297.323 205.452 296.595 205.27 C 294.547 204.679 293.273 203.313 292.135 200.446 C 290.542 196.532 290.178 189.387 290.315 163.628 C 290.406 142.42 290.406 142.465 287.63 124.488 C 285.399 110.425 280.12 93.495 274.113 81.253 C 270.836 74.654 270.381 73.971 266.877 70.558 C 261.552 65.37 259.822 64.414 255.954 64.414 C 253.314 64.414 252.495 64.641 250.857 65.688 Z"/></svg>`;

    // ── Helicopter (ADS-B Radar: a7 — rotorcraft with rotor disc) ──
    case "helicopter":
      return `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" width="100%" height="100%"><g transform="matrix(0,-1.526083,1.526083,0,154.192352,224.515808)"><path fill="${color}" ${STROKE} d="M 142.944 -44.391 C 139.538 -52.615 135.405 -50.329 128.237 -53.832 C 116.927 -59.359 102.102 -58.649 90.472 -53.832 C 82.248 -50.426 71.59 -40.893 71.59 -40.893 L 33.825 -40.893 L 24.658 -62.158 C 23.828 -63.477 22.9 -64.062 21.094 -64.062 L 18.359 -64.062 C 16.895 -64.062 16.064 -63.281 16.064 -61.768 L 24.384 -44.391 L 24.384 -25.509 L 16.064 -8.789 C 16.064 -7.227 16.895 -6.494 18.359 -6.494 L 21.094 -6.494 C 22.9 -6.494 23.828 -7.08 24.658 -8.398 L 33.822 -30.006 L 71.59 -29.975 C 71.59 -29.975 82.248 -19.474 90.472 -16.068 C 102.102 -11.25 116.937 -10.521 128.237 -16.068 C 135.379 -19.574 139.429 -17.285 142.835 -25.509 C 145.244 -31.324 145.353 -38.576 142.86 -44.422 L 142.944 -44.391 Z"/></g><path fill="${color}" ${STROKE} d="M 96.385 -25.442 C 96.705 55.448 96.705 113.74 96.607 193.603 C 96.599 200.4 105.318 200.399 105.292 193.603 C 104.981 113.74 104.981 55.448 104.846 -25.442 C 104.835 -32.064 96.359 -32.064 96.385 -25.442 Z" transform="matrix(0.642788,-0.766044,0.766044,0.642788,-28.43878,107.304662)"/><path fill="${color}" ${STROKE} d="M 96.348 -25.479 C 96.668 55.411 96.668 113.703 96.57 193.566 C 96.562 200.363 105.281 200.362 105.255 193.566 C 104.944 113.703 104.944 55.411 104.809 -25.479 C 104.798 -32.101 96.322 -32.101 96.348 -25.479 Z" transform="matrix(0.642788,0.766044,-0.766044,0.642788,100.438642,-47.173674)"/></svg>`;

    // ── Surveillance (ADS-B Radar: a5 — heavy 4-engine aircraft) ──
    case "surveillance":
      return `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" width="100%" height="100%"><g transform="matrix(0,-1.526083,1.526083,0,154.192352,224.515808)"><path fill="${color}" ${STROKE} d="M 147.119 -35.254 C 147.119 -41.846000000000004 138.086 -46.68 127.344 -46.68 L 103.125 -46.68 C 100.049 -46.68 98.877 -47.168 96.924 -49.268 L 90.503 -56.217 L 90.503 -66.571 L 81.002 -66.571 L 81.031 -82.156 L 66.863 -82.156 L 59.277 -90.478 C 58.057 -91.797 56.592 -92.529 55.029 -92.529 L 48.438 -92.529 C 46.973 -92.529 46.143 -91.211 46.875 -89.648 L 66.26 -46.68 L 34.912 -43.555 L 24.658 -62.158 C 23.828 -63.477 22.9 -64.062 21.094 -64.062 L 18.359 -64.062 C 16.895 -64.062 16.064 -63.281 16.064 -61.768 L 16.064 -8.789 C 16.064 -7.227 16.895 -6.494 18.359 -6.494 L 21.094 -6.494 C 22.9 -6.494 23.828 -7.08 24.658 -8.398 L 34.912 -26.953 L 66.26 -23.877 L 46.875 19.141 C 46.143 20.654 46.973 21.973 48.438 21.973 L 55.029 21.973 C 56.592 21.973 58.057 21.24 59.277 19.922 L 66.848 12.193 L 81.031 12.256 L 81.002 -3.927 L 90.503 -3.927 L 90.503 -14.345 L 96.924 -21.24 C 98.877 -23.389 100.049 -23.877 103.125 -23.877 L 127.344 -23.877 C 138.086 -23.877 147.119 -28.662 147.119 -35.254 Z"/></g></svg>`;

    // ── Trainer (ADS-B Radar: cessna — small general aviation prop) ──
    case "trainer":
      return `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="100%" height="100%"><path fill="${color}" ${STROKE} d="m253.8 78.5-1.1 2.5h-22.4c-19.2 0-22.3.2-22.3 1.5s3.1 1.5 21.5 1.5c11.8 0 21.5.3 21.5.7 0 .5-.9 2.2-1.9 3.9-1.4 2.3-2.9 3.3-5.8 3.7-4.8.8-8.2 4.2-8.9 8.8-.4 3.3-3.4 50-3.4 54 0 1.9-1.3 1.9-49.7 1.9-56.1.1-172.4 3.9-176.1 5.9-5 2.7-5.2 3.9-5.2 30.2v24.6l5.8.6c3.1.3 36.9 5.1 75 10.7l69.3 10h83.5l6.6 57.2c3.6 31.5 6.5 57.4 6.4 57.5-.1.1-13.4 2.5-29.6 5.2-37.5 6.4-36.4 6.1-38.4 11.1-2.9 7.3-1.6 25.4 2.2 30 1.4 1.7 5.9 2.6 29.2 6 15.1 2.2 28.3 4 29.2 4 1.2 0 3.2-2.8 6.2-8.8 2.6-5.2 4.6-8.1 4.9-7.2.3.8 1.2 10.5 2.1 21.4.9 11 2 20.4 2.6 21 2.2 2.2 3.1-1.7 4.6-21 .9-10.9 1.8-20.6 2.1-21.4.3-.9 2.3 2 4.9 7.2 3 6 5 8.8 6.2 8.8.9 0 14.1-1.8 29.2-4 23.3-3.4 27.8-4.3 29.2-6 3.8-4.6 5.1-22.7 2.2-30-2-5-.9-4.7-38.4-11.1-16.2-2.7-29.5-5.1-29.6-5.2-.1-.1 2.8-26 6.4-57.5l6.6-57.2h83.5l69.3-10c38.1-5.6 71.9-10.4 75.1-10.7l5.7-.6v-24.6c0-26.3-.2-27.5-5.2-30.2-3.7-2-120-5.8-176-5.9-48.5 0-49.8 0-49.8-1.9 0-4-3-50.7-3.4-54-.7-4.6-4.1-8-8.9-8.8-2.9-.4-4.4-1.4-5.8-3.7-1-1.7-1.9-3.4-1.9-3.9 0-.4 9.7-.7 21.5-.7 18.4 0 21.5-.2 21.5-1.5s-3.1-1.5-22.3-1.5h-22.4l-1.1-2.5c-.6-1.4-1.6-2.5-2.2-2.5-.6 0-1.6 1.1-2.2 2.5Z"/></svg>`;

    // ── Bomber (ADS-B Radar: b747 — large 4-engine heavy aircraft) ──
    case "bomber":
      return `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="100%" height="100%"><g transform="translate(0,512) scale(0.1,-0.1)"><path fill="${color}" ${STROKE} d="M2512 5104 c-83 -58 -152 -303 -182 -639 -6 -66 -14 -281 -17 -478 l-6 -358 -226 -199 -226 -200 -5 66 c-6 82 -20 94 -105 94 -98 0 -105 -9 -105 -138 0 -59 4 -113 9 -120 4 -7 20 -16 36 -20 27 -8 16 -18 -256 -259 l-284 -252 -3 77 c-2 42 -8 82 -14 89 -14 17 -159 18 -176 1 -8 -8 -12 -52 -12 -130 0 -96 3 -120 15 -124 9 -4 15 -19 15 -38 -1 -28 -27 -54 -285 -281 l-284 -250 0 -235 c0 -129 3 -228 6 -220 4 8 13 48 22 89 l16 74 590 335 590 335 325 104 c179 57 333 106 343 109 16 5 17 -27 17 -579 0 -450 4 -619 15 -738 16 -163 40 -314 55 -353 10 -27 16 -20 -426 -447 l-202 -194 -7 -108 c-4 -60 -5 -111 -2 -113 2 -3 168 44 368 104 200 60 365 108 367 107 2 -2 12 -42 23 -89 12 -47 29 -96 40 -108 l19 -23 19 23 c11 12 28 61 40 108 11 47 21 87 23 89 2 1 167 -47 367 -107 200 -60 366 -107 368 -104 3 2 2 53 -2 113 l-7 108 -202 194 c-442 427 -436 420 -426 447 15 39 39 190 55 353 11 119 15 288 15 738 0 552 1 584 18 579 9 -3 163 -52 342 -109 l326 -104 589 -335 590 -335 16 -74 c9 -41 18 -81 22 -89 3 -8 6 91 6 220 l0 235 -284 250 c-258 227 -284 253 -285 281 0 19 6 34 15 38 12 4 15 28 15 124 0 78 -4 122 -12 130 -17 17 -162 16 -176 -1 -6 -7 -12 -47 -14 -89 l-3 -77 -284 252 c-272 241 -283 251 -256 259 16 4 32 13 36 20 5 7 9 61 9 120 0 129 -7 138 -105 138 -85 0 -99 -12 -105 -94 l-5 -66 -226 200 -226 199 -6 358 c-4 197 -11 412 -17 478 -36 406 -123 655 -230 655 -14 0 -36 -7 -48 -16z"/></g></svg>`;

    // ── UAV (ADS-B Radar: a1 — light aircraft silhouette) ──
    case "uav":
      return `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" width="100%" height="100%"><g transform="matrix(0,-1.526083,1.526083,0,154.192352,224.515808)"><path fill="${color}" ${STROKE} d="M 137.678 -39.456 C 137.678 -41.883 134.94 -44.391 133.645 -44.391 C 130.326 -44.391 135.025 -44.391 128.237 -44.391 L 109.354 -44.391 C 106.278 -44.391 101.866 -46.186 99.913 -48.286 L 99.913 -91.597 C 98.693 -92.916 94.12 -96.731 90.472 -96.731 C 86.824 -96.731 80.299 -93.16 81.031 -91.597 L 71.59 -44.391 L 62.149 -44.391 L 33.822 -39.639 C 33.825 -40.147 33.825 -57.191 33.825 -63.273 C 33.825 -67.493 21.167 -63.273 21.167 -63.273 C 19.703 -63.273 20.894 -55.345 20.979 -53.858 C 20.894 -53.832 16.125 -41.44 16.143 -34.95 C 16.161 -28.451 21.006 -16.068 21.006 -16.068 C 21.006 -14.506 19.141 -6.626 21.176 -6.613 C 20.605 -6.626 33.825 -2.219 33.825 -6.626 C 33.825 -13.832 33.825 -30.235 33.825 -30.235 L 62.149 -25.509 L 71.59 -25.509 L 81.031 21.697 C 80.299 23.21 86.998 25.911 90.472 25.911 C 93.946 25.911 98.693 23.015 99.913 21.697 L 99.913 -20.794 C 101.866 -22.943 106.278 -25.509 109.354 -25.509 L 128.237 -25.509 C 135.418 -25.509 130.239 -25.509 133.62 -25.485 C 135.593 -25.509 137.678 -28.025 137.678 -30.396 C 137.678 -30.396 146.133 -33.618 146.135 -34.95 C 146.137 -36.315 137.678 -39.456 137.678 -39.456 Z"/></g></svg>`;

    // ── Unknown (ADS-B Radar: a3 — generic jet airliner) ──
    case "unknown":
    default:
      return `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" width="100%" height="100%"><g transform="matrix(0,-1.526083,1.526083,0,154.192352,224.515808)"><path fill="${color}" ${STROKE} d="M 147.119 -35.254 C 147.119 -41.846 138.086 -46.68 127.344 -46.68 L 103.125 -46.68 C 100.049 -46.68 98.877 -47.168 96.924 -49.268 L 90.503 -56.217 L 90.503 -66.571 L 81.002 -66.571 L 59.277 -90.478 C 58.057 -91.797 56.592 -92.529 55.029 -92.529 L 48.438 -92.529 C 46.973 -92.529 46.143 -91.211 46.875 -89.648 L 66.26 -46.68 L 34.912 -43.555 L 24.658 -62.158 C 23.828 -63.477 22.9 -64.062 21.094 -64.062 L 18.359 -64.062 C 16.895 -64.062 16.064 -63.281 16.064 -61.768 L 16.064 -8.789 C 16.064 -7.227 16.895 -6.494 18.359 -6.494 L 21.094 -6.494 C 22.9 -6.494 23.828 -7.08 24.658 -8.398 L 34.912 -26.953 L 66.26 -23.877 L 46.875 19.141 C 46.143 20.654 46.973 21.973 48.438 21.973 L 55.029 21.973 C 56.592 21.973 58.057 21.24 59.277 19.922 L 81.069 -3.904 L 90.503 -3.927 L 90.503 -14.345 L 96.924 -21.24 C 98.877 -23.389 100.049 -23.877 103.125 -23.877 L 127.344 -23.877 C 138.086 -23.877 147.119 -28.662 147.119 -35.254 Z"/></g></svg>`;
  }
};
